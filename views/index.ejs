<%- include("partials/header.ejs") %>

<!-- [ ]: Add image 
<div>
  <div>
    <img src="" alt="" />
  </div>
</div>
-->
<div>
  <p>
    Welcome to <span>CapyBlog</span>. A place to share information, opinions or
    experiences.
  </p>
</div>

<div class="flex-container">
  <!-- Loop through each post and display -->
  <% for (let i = 0; i < posts.length; i++) { %>
  <div class="container-orange flex-item">
    <div class="delete-leaf">
      <!-- Form to delete current post -->
      <form action="/delete-post/<%= i %>" method="POST">
        <button
          class="icon underline"
          type="submit"
          onclick="return confirm('Are you sure you want to delete this post?')"
        >
          <img src="images/trash-icon.png" alt="delete icon" />
        </button>
      </form>
    </div>
    <div class="post-container">
      <div class="heading-container">
        <h1><%= posts[i].title %></h1>
        <!-- Link to edit current post -->
        <a href="/edit-post/<%= i %>" class="icon underline"
          ><img src="images/pencil-icon.png" alt="edit icon"
        /></a>
      </div>
      <p class="underline">
        <!-- Limit the amount of characters displayed as a preview -->
        <% var preview = (posts[i].content).substring(0, 250) %> <%= preview
        %>...
        <a href="/views/view-post/<%= i %>">View full text</a>
      </p>
      <p>Author: <span><%= posts[i].author %></span></p>
    </div>
  </div>
  <% } %>
</div>

<%- include("partials/footer.ejs") %>
