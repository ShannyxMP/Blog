<%- include("partials/header.ejs") %>

<div class="capybara-homepage_grid">
  <div id="capybara-homepage">
    <img src="/images/Capybara.png" alt="capybara drawing" />
  </div>
  <div id="welcome">
    <div>
      <p>Welcome~</p>
    </div>
  </div>
</div>

<div id="introduction">
  <div>
    <p>
      <strong>CapyBlog</strong> is a cozy corner of the internet for sharing
      thoughts, stories, and gentle reflections. Here, mindfulness meets
      meaningâ€”come as you are, and feel free to stay awhile.
    </p>
  </div>
</div>

<div class="all_posts-flex">
  <!-- Loop through each post and display -->
  <% for (let i = 0; i < posts.length; i++) { %>
  <div class="container-orange all_posts-flex-item">
    <div class="delete-leaf">
      <!-- Form to delete current post -->
      <form action="/delete-post/<%= i %>" method="POST">
        <button
          class="icon underline"
          type="submit"
          onclick="return confirm('Are you sure you want to delete this post?')"
        >
          <img src="images/trash-icon.png" alt="delete icon" />
        </button>
      </form>
    </div>
    <div class="post-homepage">
      <div class="heading-homepage">
        <h1><%= posts[i].title %></h1>
        <!-- Link to edit current post -->
        <a href="/edit-post/<%= i %>" class="icon underline"
          ><img src="images/pencil-icon.png" alt="edit icon"
        /></a>
      </div>
      <p class="underline">
        <!-- Limit the amount of characters displayed as a preview -->
        <% var preview = (posts[i].content).substring(0, 250) %> <%= preview
        %>...
        <a href="/views/view-post/<%= i %>">View full text</a>
      </p>
      <p>Author: <span><%= posts[i].author %></span></p>
    </div>
  </div>
  <% } %>
</div>

<%- include("partials/footer.ejs") %>
